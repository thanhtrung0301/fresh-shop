 <div class="all-title-box">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h2>Shop Detail</h2>
                    <ul class="breadcrumb">
                        <li class="breadcrumb-item"><a href="/products">Shop</a></li>
                        <li class="breadcrumb-item active">Shop Detail </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- End All Title Box -->

    <!-- Start Shop Detail  -->
    <div class="shop-detail-box-main">
        <div class="container">
            <div class="row">
                <div class="col-xl-5 col-lg-5 col-md-6">
                    <div id="carousel-example-1" class="single-product-slider carousel slide" data-ride="carousel">
                        <div class="carousel-inner" role="listbox">
                            <div class="carousel-item active"> <img class="d-block w-100" src="{{image}}" alt="First slide"> </div>
                            <div class="carousel-item"> <img class="d-block w-100" src="{{image}}" alt="Second slide"> </div>
                            <div class="carousel-item"> <img class="d-block w-100" src="{{image}}" alt="Third slide"> </div>
                        </div>
                        <a class="carousel-control-prev" href="#carousel-example-1" role="button" data-slide="prev"> 
						<i class="fa fa-angle-left" aria-hidden="true"></i>
						<span class="sr-only">Previous</span> 
					</a>
                        <a class="carousel-control-next" href="#carousel-example-1" role="button" data-slide="next"> 
						<i class="fa fa-angle-right" aria-hidden="true"></i> 
						<span class="sr-only">Next</span> 
					</a>
                        <ol class="carousel-indicators">
                            <li data-target="#carousel-example-1" data-slide-to="0" class="active">
                                <img class="d-block w-100 img-fluid" src="{{image}}" alt="" />
                            </li>
                            <li data-target="#carousel-example-1" data-slide-to="1">
                                <img class="d-block w-100 img-fluid" src="{{image}}" alt="" />
                            </li>
                            <li data-target="#carousel-example-1" data-slide-to="2">
                                <img class="d-block w-100 img-fluid" src="{{image}}" alt="" />
                            </li>
                        </ol>
                    </div>
                </div>
                <div class="col-xl-7 col-lg-7 col-md-6">
                    <div class="single-product-details">
                        <h2>{{name}}</h2>
                        <h5> <del>$ 60.00</del> ${{price}}</h5>
                        <p class="available-stock"><span> More than 20 available / <a href="#">8 sold </a></span><p>
						<h4>Short Description:</h4>
						<p>{{description}} </p>
						<ul>
							<li>
								<div class="form-group quantity-box">
									<label class="control-label">Quantity</label>
									<input class="form-control" value="0" min="0" max="20" type="number">
								</div>
							</li>
						</ul>

						<div class="price-box-bar">
							<div class="cart-and-bay-btn">
								<a class="btn hvr-hover" data-fancybox-close="" href="#">Buy New</a>
								<a class="btn hvr-hover" data-fancybox-close="" href="#">Add to cart</a>
							</div>
						</div>

						<div class="add-to-btn">
							<div class="add-comp">
								<a class="btn hvr-hover" href="#"><i class="fas fa-heart"></i> Add to wishlist</a>
								<a class="btn hvr-hover" href="#"><i class="fas fa-sync-alt"></i> Add to Compare</a>
							</div>
							<div class="share-bar">
								<a class="btn hvr-hover" href="#"><i class="fab fa-facebook" aria-hidden="true"></i></a>
								<a class="btn hvr-hover" href="#"><i class="fab fa-google-plus" aria-hidden="true"></i></a>
								<a class="btn hvr-hover" href="#"><i class="fab fa-twitter" aria-hidden="true"></i></a>
								<a class="btn hvr-hover" href="#"><i class="fab fa-pinterest-p" aria-hidden="true"></i></a>
								<a class="btn hvr-hover" href="#"><i class="fab fa-whatsapp" aria-hidden="true"></i></a>
							</div>
						</div>
                    </div>
                </div>
            </div>
			
			<div class="row my-5">
				<div class="card card-outline-secondary my-4" style="width: 100%">
					<div class="card-header">
						<h2>Product Reviews</h2>
					</div>
					<div class="card-body">
                        <div class="list-review w-100"></div>
                        <span class="product-pagination mt-3"></span>
						<hr>
                        {{#if user}}
                        <form action="/products/leave-review" method="post">
							<img class="rounded-circle border p-1 mr-2" style="width: 64px; height: 64px;" src="{{user.avatar}}" alt="Generic placeholder image">
                            <input type="text" name="review" style="width: 80%; height: 50px;" placeholder="Enter your review...">
                            <input type="text" name="productID" value="{{productID}}" hidden id="productID">
                            <br>
                            <button type="submit" class="btn hvr-hover btn-center">Leave a Review</button>
                        </form>
                        {{else}}
                        <h3 class="text-center"> You must<a href="/login" class="link-review">login</a>to leave a review</h3>
                        {{/if}}
					</div>
				  </div>
			</div>

            <div class="row my-5">
                <div class="col-lg-12">
                    <div class="title-all text-center">
                        <h1>Related Products</h1>
                    </div>
                    <div class="featured-products-box owl-carousel owl-theme">
                        {{#products}}
                        <div class="item">
                            <div class="products-single fix">
                                <div class="box-img-hover">
                                    <img src="{{image}}" class="img-fluid" alt="Image">
                                    <div class="mask-icon">
                                        <ul>
                                            <li><a href="{{detail}}" data-toggle="tooltip" data-placement="right" title="View"><i class="fas fa-eye"></i></a></li>
                                            <li><a href="#" data-toggle="tooltip" data-placement="right" title="Compare"><i class="fas fa-sync-alt"></i></a></li>
                                            <li><a href="#" data-toggle="tooltip" data-placement="right" title="Add to Wishlist"><i class="far fa-heart"></i></a></li>
                                        </ul>
                                        <a class="cart" href="#">Add to Cart</a>
                                    </div>
                                </div>
                                <div class="why-text">
                                    <h4>{{name}}</h4>
                                    <h5> ${{price}}</h5>
                                </div>
                            </div>
                        </div>
                        {{/products}}    
                    </div>
                </div>
            </div>

        </div>
    </div>
    <!-- End Cart -->

<script>
    function changePage(apiLink, pageIndex) {
        $.getJSON(apiLink, function(reviews) {
            const perPage = 3;
            // Render pagination
            const pageCurrent = parseInt($('.current').text());
            const pages = Math.ceil(reviews.length / perPage);
            $('.product-pagination').empty();
            if(pageIndex == -1)
                pageIndex =  pageCurrent > 1 ? pageCurrent - 1 : 1;
            else if(pageIndex == 0)
                    pageIndex = pageCurrent <  pages ? pageCurrent + 1 : pages;
                    
            $('.product-pagination').append(`<a onClick="changePage('${apiLink}', -1)"><i class="fa fa-angle-left" aria-hidden="true"></i></a>`);
            for(let i = 1; i < pages + 1; i++)
                $('.product-pagination').append(`<a onClick="changePage('${apiLink}', this.innerText)">${i}</a>`);
            $('.product-pagination').append(`<a onClick="changePage('${apiLink}', 0)"><i class="fa fa-angle-right" aria-hidden="true"></i></a>`);
            
            // Add class to current page
            let start = (pageIndex - 1) * perPage;
            let end = pageIndex * perPage;
            reviews = reviews.slice(start, end);
            const pageList = $('.product-pagination a');
            Array.from(pageList).forEach(function(page){
                page.classList.remove('current');
            })
            pageList[pageIndex].classList.add('current');
            
            // Render orders
            $('.list-review').empty();
            
            reviews.forEach(function(review) {
                console.log(review)
                $('.list-review').append(`	<div class="media mb-3">
                                                    <div class="mr-2"> 
                                                        <img class="rounded-circle border p-1" src="${review.user.avatar}" style="width: 64px; height: 64px;" alt="Generic placeholder image">
                                                    </div>
                                                    <div class="media-body">
                                                        <p>${review.content}</p>
                                                        <small class="text-muted">Posted by ${review.user.name} on ${review.date}</small>
                                                    </div>
                                            </div>
                                            <hr>`);
            })
        })
    }

    const productID = $('#productID').val();
    changePage(`/products/api/list-reviews/${productID}`, 1);
</script>   